{"version":3,"sources":["webpack:///./src/views/searchResultDetail.vue?6f9f","webpack:///./src/views/searchResultDetail.vue?e5d8","webpack:///./src/views/searchResultDetail.vue"],"names":["_hoisted_1","class","_hoisted_2","_hoisted_3","_ctx","_cache","$props","$setup","$data","$options","_component_HorizontalNav","_component_LikedIcon","_component_HaveLikedIcon","_component_DownloadMusicIcon","_component_musicList","_component_CommonToast","navs","columns","dataSource","map","item","index","emptyText","toolBar","musicId","id","name","String","padStart","likedMusicList","includes","key","onClick","$event","collectMusic","width","height","handleDownloadMusic","_","ref","components","MusicList","setup","route","store","state","title","active","keywords","query","keyword","songs","span","dataIndex","slots","customRender","render","text","join","toastRef","newV","type","then","res","code","result","dispatch","immediate","like","success","error","catch","err","urls","data","length","url","warn","__exports__"],"mappings":"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","file":"js/chunk-2d21ae99.4a36a926.js","sourcesContent":["import { resolveComponent as _resolveComponent, createVNode as _createVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, withCtx as _withCtx, Fragment as _Fragment } from \"vue\"\n\nconst _hoisted_1 = { class: \"px-5 py-4\" }\nconst _hoisted_2 = { class: \"text-muted me-3\" }\nconst _hoisted_3 = { class: \"me-3\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_HorizontalNav = _resolveComponent(\"HorizontalNav\")\n  const _component_LikedIcon = _resolveComponent(\"LikedIcon\")\n  const _component_HaveLikedIcon = _resolveComponent(\"HaveLikedIcon\")\n  const _component_DownloadMusicIcon = _resolveComponent(\"DownloadMusicIcon\")\n  const _component_musicList = _resolveComponent(\"musicList\")\n  const _component_CommonToast = _resolveComponent(\"CommonToast\")\n\n  return (_openBlock(), _createBlock(_Fragment, null, [\n    _createVNode(\"div\", _hoisted_1, [\n      _createVNode(_component_HorizontalNav, { navs: _ctx.navs }, null, 8, [\"navs\"]),\n      _createVNode(_component_musicList, {\n        columns: _ctx.columns,\n        dataSource: _ctx.dataSource?.map((item, index) => ({ ...item, index: index })),\n        emptyText: \"暂无搜索结果，搜搜其他关键词吧~\"\n      }, {\n        toolBar: _withCtx(({id:musicId,index,name}) => [\n          _createVNode(\"span\", _hoisted_2, _toDisplayString(String(index + 1).padStart(2, \"0\")), 1),\n          _createVNode(\"span\", _hoisted_3, [\n            (!_ctx.likedMusicList.includes(musicId))\n              ? (_openBlock(), _createBlock(_component_LikedIcon, {\n                  key: 0,\n                  class: \"cursor-pointer\",\n                  onClick: ($event: any) => (_ctx.collectMusic(true, musicId)),\n                  width: \"15\",\n                  height: \"15\"\n                }, null, 8, [\"onClick\"]))\n              : (_openBlock(), _createBlock(_component_HaveLikedIcon, {\n                  key: 1,\n                  class: \"cursor-pointer\",\n                  onClick: ($event: any) => (_ctx.collectMusic(false, musicId)),\n                  width: \"15\",\n                  height: \"15\"\n                }, null, 8, [\"onClick\"]))\n          ]),\n          _createVNode(_component_DownloadMusicIcon, {\n            onClick: ($event: any) => (_ctx.handleDownloadMusic({ id: musicId, name })),\n            class: \"cursor-pointer\",\n            width: \"15\",\n            height: \"15\"\n          }, null, 8, [\"onClick\"])\n        ]),\n        _: 1\n      }, 8, [\"columns\", \"dataSource\"])\n    ]),\n    _createVNode(_component_CommonToast, { ref: \"toastRef\" }, null, 512)\n  ], 64))\n}","\nimport { computed, ComputedRef, defineComponent, reactive, ref, Ref, toRefs, watch } from \"vue\";\nimport { NavsProps } from \"@/components/viewParts/HorizontalNav.vue\";\nimport { searchApi, cloudsearchApi } from \"@/api/search\";\nimport { useRoute } from \"vue-router\";\nimport { useStore } from \"vuex\";\nimport MusicList, { ColumnProps } from \"@/components/viewParts/MusicList.vue\";\nimport { playTime, YYYYMMDD, addHaveUrl } from \"@/hooks/useFilters\";\nimport { likeMusic } from \"@/api/discover\";\nimport { downloadMusic } from \"@/utils/file\";\nimport { AxiosResponseProps } from \"@/utils/request\";\nimport { getSongUrlApi } from \"@/api/song\";\nexport default defineComponent({\n    components: { MusicList },\n    setup() {\n        const route = useRoute();\n        const store = useStore();\n        const state = reactive<{\n            navs: NavsProps[];\n            keywords: ComputedRef<string>;\n            songs: any[];\n            columns: ColumnProps[];\n            dataSource: any[];\n            likedMusicList: ComputedRef<unknown[]>;\n            toastRef: Ref;\n        }>({\n            navs: [{ title: \"单曲\", active: true }],\n            keywords: computed(() => route.query.keyword as string),\n            songs: [],\n            columns: [\n                {\n                    title: \"\",\n                    span: 1,\n                    dataIndex: \"toolBar\",\n                    slots: { customRender: \"toolBar\" },\n                },\n                {\n                    title: \"音乐标题\",\n                    dataIndex: \"name\",\n                    span: 3,\n                    slots: { customRender: \"name\" },\n                },\n                {\n                    title: \"歌手\",\n                    dataIndex: \"ar\",\n                    span: 3,\n                    render: text => {\n                        return text.map(item => item.name).join(\"、\");\n                    },\n                },\n                {\n                    title: \"专辑\",\n                    dataIndex: \"al\",\n                    span: 2,\n                    render: text => {\n                        return text.name;\n                    },\n                },\n                {\n                    title: \"时长\",\n                    dataIndex: \"dt\",\n                    span: 1,\n                    render: text => {\n                        return playTime(text);\n                    },\n                },\n            ],\n            dataSource: [],\n            likedMusicList: computed(() => store.state.likedMusicList),\n            toastRef: ref(null),\n        });\n        watch(\n            () => state.keywords,\n            async newV => {\n                if (newV) {\n                    cloudsearchApi({ keywords: newV, type: 1 }).then(async (res: any) => {\n                        if (res.code === 200) {\n                            state.dataSource = await addHaveUrl(res.result.songs || []);\n                        }\n                    });\n                    await store.dispatch(\"getLikedMusicList\");\n                }\n            },\n            {\n                immediate: true,\n            }\n        );\n        const collectMusic = (like, id) => {\n            likeMusic({ id, like })\n                .then(async (res: any) => {\n                    if (res.code === 200) {\n                        await store.dispatch(\"getLikedMusicList\");\n                        state.toastRef.success(like ? \"已添加到我喜欢的音乐\" : \"取消喜欢成功\");\n                    } else {\n                        state.toastRef.error(like ? \"添加失败\" : \"取消喜欢失败\");\n                    }\n                })\n                .catch(err => {\n                    state.toastRef.error(\"请求失败\");\n                });\n        };\n        const handleDownloadMusic = ({ id, name }) => {\n            getSongUrlApi({ id }).then((res: AxiosResponseProps) => {\n                if (res.code === 200) {\n                    let urls = res.data;\n                    if (urls && urls.length) {\n                        downloadMusic(urls[0].url, name)\n                            .then(() => {\n                                state.toastRef.success(\"已添加至下载\");\n                            })\n                            .catch(() => {\n                                state.toastRef.warn(\"下载失败\");\n                            });\n                    } else {\n                        state.toastRef.warn(\"获取音乐链接失败\");\n                    }\n                }\n            });\n        };\n        return {\n            ...toRefs(state),\n            collectMusic,\n            handleDownloadMusic,\n        };\n    },\n});\n","import { render } from \"./searchResultDetail.vue?vue&type=template&id=520c6aae&ts=true\"\nimport script from \"./searchResultDetail.vue?vue&type=script&lang=ts\"\nexport * from \"./searchResultDetail.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Users/bytedance/Documents/projects/followNeteaseDesktop/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}