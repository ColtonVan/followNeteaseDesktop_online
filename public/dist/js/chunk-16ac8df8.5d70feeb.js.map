{"version":3,"sources":["webpack:///./src/views/updateMusicList.vue?2401","webpack:///./src/views/updateMusicList.vue?5294","webpack:///./src/views/updateMusicList.vue","webpack:///./src/views/updateMusicList.vue?f824"],"names":["_withId","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","render","_ctx","_cache","$props","$setup","$data","$options","_component_horizontal_nav","_component_CommonModal","_component_CommonToast","navs","type","$event","name","tags","item","key","id","onClick","modalVisible","length","ref","rows","maxlength","desc","handleSave","$router","back","width","height","src","imgFile","alt","handleEditCover","title","onConfirm","modalConfirm","visible","bodyStyle","bodyClass","default","tagList","tagsIndex","tagLabelNames","find","nameIndex","tag","clickTagItem","activeTagInner","active","_","components","HorizontalNav","setup","route","store","state","mergedTagList","reduce","pre","formData","commonToast","playListDetail","descRef","getPlayListDetail","query","then","res","code","playlist","coverImgUrl","description","init","fileUploader","select","handleCallback","files","FormData","append","reader","FileReader","readAsDataURL","onload","event","target","result","img","Image","naturalWidth","newV","focus","immediate","warn","map","join","success","get","dispatch","msg","catch","err","getHighqualityTags","pre2","item2","item3","category","includes","item4","filter","item5","__exports__"],"mappings":"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","file":"js/chunk-16ac8df8.5d70feeb.js","sourcesContent":["import { resolveComponent as _resolveComponent, createVNode as _createVNode, vModelText as _vModelText, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createBlock as _createBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, withCtx as _withCtx, withScopeId as _withScopeId, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\nconst _withId = /*#__PURE__*/_withScopeId(\"data-v-66693a88\")\n\n_pushScopeId(\"data-v-66693a88\")\nconst _hoisted_1 = { class: \"px-5 py-4\" }\nconst _hoisted_2 = { class: \"d-flex mt-5\" }\nconst _hoisted_3 = { class: \"editForm d-flex flex-column align-items-start\" }\nconst _hoisted_4 = /*#__PURE__*/_createVNode(\"span\", { class: \"labelName\" }, \"歌单名：\", -1)\nconst _hoisted_5 = /*#__PURE__*/_createVNode(\"span\", { class: \"labelName\" }, \"标签：\", -1)\nconst _hoisted_6 = { class: \"d-flex align-items-center position-relative\" }\nconst _hoisted_7 = { class: \"position-relative\" }\nconst _hoisted_8 = /*#__PURE__*/_createVNode(\"span\", { class: \"labelName\" }, \"简介：\", -1)\nconst _hoisted_9 = { class: \"textareaOuter w-100 pb-3\" }\nconst _hoisted_10 = { class: \"position-absolute bottom-0 text-muted remainLength\" }\nconst _hoisted_11 = { class: \"d-flex opBtns mt-5\" }\nconst _hoisted_12 = { class: \"ms-5 ps-5 d-flex flex-column align-items-center\" }\nconst _hoisted_13 = /*#__PURE__*/_createVNode(\"div\", { class: \"text-black-50 mb-3\" }, [\n  /*#__PURE__*/_createTextVNode(\"选择合适的标签，最多可以选\"),\n  /*#__PURE__*/_createVNode(\"span\", { class: \"maxTagSum\" }, \"3\"),\n  /*#__PURE__*/_createTextVNode(\"个\")\n], -1)\nconst _hoisted_14 = { class: \"tagLabelName text-black-50 flex-grow-1 flex-shrink-0\" }\nconst _hoisted_15 = { class: \"d-flex flex-wrap tags\" }\n_popScopeId()\n\nexport const render = /*#__PURE__*/_withId((_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) => {\n  const _component_horizontal_nav = _resolveComponent(\"horizontal-nav\")\n  const _component_CommonModal = _resolveComponent(\"CommonModal\")\n  const _component_CommonToast = _resolveComponent(\"CommonToast\")\n\n  return (_openBlock(), _createBlock(_Fragment, null, [\n    _createVNode(\"div\", _hoisted_1, [\n      _createVNode(_component_horizontal_nav, { navs: _ctx.navs }, null, 8, [\"navs\"]),\n      _createVNode(\"div\", _hoisted_2, [\n        _createVNode(\"div\", _hoisted_3, [\n          _createVNode(\"label\", null, [\n            _hoisted_4,\n            _withDirectives(_createVNode(\"input\", {\n              type: \"text\",\n              class: \"flex-grow-1\",\n              \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => (_ctx.name = $event))\n            }, null, 512), [\n              [_vModelText, _ctx.name]\n            ])\n          ]),\n          _createVNode(\"label\", null, [\n            _hoisted_5,\n            _createVNode(\"div\", _hoisted_6, [\n              (_openBlock(true), _createBlock(_Fragment, null, _renderList(_ctx.tags, (item) => {\n                return (_openBlock(), _createBlock(\"div\", {\n                  key: item.id,\n                  class: \"rounded-pill border text-muted px-2 me-2 flex-center\"\n                }, _toDisplayString(item.name || item), 1))\n              }), 128)),\n              _createVNode(\"div\", {\n                onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.modalVisible = true)),\n                class: [\"colorA cursor-pointer\", { 'ms-4': _ctx.tags.length }]\n              }, \" 添加标签 \", 2)\n            ])\n          ]),\n          _createVNode(\"label\", _hoisted_7, [\n            _hoisted_8,\n            _createVNode(\"div\", _hoisted_9, [\n              _withDirectives(_createVNode(\"textarea\", {\n                ref: \"descRef\",\n                rows: \"5\",\n                class: \"flex-grow-1 w-100\",\n                maxlength: \"1000\",\n                \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => (_ctx.desc = $event))\n              }, null, 512), [\n                [_vModelText, _ctx.desc]\n              ])\n            ]),\n            _createVNode(\"span\", _hoisted_10, _toDisplayString(1000 - _ctx.desc.length), 1)\n          ]),\n          _createVNode(\"div\", _hoisted_11, [\n            _createVNode(\"div\", {\n              onClick: _cache[4] || (_cache[4] = \n//@ts-ignore\n(...args) => (_ctx.handleSave && _ctx.handleSave(...args))),\n              class: \"opBtn saveBtn rounded-pill text-white\"\n            }, \"保 存\"),\n            _createVNode(\"div\", {\n              onClick: _cache[5] || (_cache[5] = ($event: any) => (_ctx.$router.back())),\n              class: \"opBtn cancelBtn border rounded-pill ms-4\"\n            }, \"取 消\")\n          ])\n        ]),\n        _createVNode(\"div\", _hoisted_12, [\n          _createVNode(\"img\", {\n            class: \"rounded-3 coverImg\",\n            width: \"160\",\n            height: \"160\",\n            src: _ctx.imgFile,\n            alt: \"\"\n          }, null, 8, [\"src\"]),\n          _createVNode(\"div\", {\n            onClick: _cache[6] || (_cache[6] = \n//@ts-ignore\n(...args) => (_ctx.handleEditCover && _ctx.handleEditCover(...args))),\n            class: \"opBtn cancelBtn rounded-pill border mt-4\"\n          }, \"编辑封面\")\n        ])\n      ])\n    ]),\n    _createVNode(_component_CommonModal, {\n      title: \"添加标签\",\n      onConfirm: _ctx.modalConfirm,\n      visible: _ctx.modalVisible,\n      \"onUpdate:visible\": _cache[7] || (_cache[7] = ($event: any) => (_ctx.modalVisible = $event)),\n      bodyStyle: \"min-height: 220px\",\n      bodyClass: \"w-100 overflow-scroll hideScrollBar\"\n    }, {\n      default: _withId(() => [\n        _hoisted_13,\n        (_openBlock(true), _createBlock(_Fragment, null, _renderList(_ctx.tagList, (tags, tagsIndex) => {\n          return (_openBlock(), _createBlock(\"div\", {\n            class: \"d-flex justify-content-between w-100 mb-2\",\n            key: tagsIndex\n          }, [\n            _createVNode(\"div\", _hoisted_14, _toDisplayString(_ctx.tagLabelNames.find((name, nameIndex) => nameIndex == tagsIndex)), 1),\n            _createVNode(\"div\", _hoisted_15, [\n              (_openBlock(true), _createBlock(_Fragment, null, _renderList(tags, (tag) => {\n                return (_openBlock(), _createBlock(\"div\", {\n                  class: \"tagItem mb-2 d-flex justify-content-start\",\n                  key: tag.name\n                }, [\n                  _createVNode(\"div\", {\n                    onClick: ($event: any) => (_ctx.clickTagItem(tag)),\n                    class: [{ activeTagInner: tag.active }, \"tagInner rounded-pill flex-center text-ellipsis cursor-pointer\"]\n                  }, _toDisplayString(tag.name), 11, [\"onClick\"])\n                ]))\n              }), 128))\n            ])\n          ]))\n        }), 128))\n      ]),\n      _: 1\n    }, 8, [\"onConfirm\", \"visible\"]),\n    _createVNode(_component_CommonToast, { ref: \"commonToast\" }, null, 512)\n  ], 64))\n})","\nimport HorizontalNav, { NavsProps } from \"@/components/viewParts/HorizontalNav.vue\";\nimport { computed, ComputedRef, defineComponent, nextTick, reactive, ref, Ref, toRefs, watch } from \"vue\";\nimport { FileSelector } from \"@/utils/file\";\nimport { updatePlayListCoverApi, getHighqualityTagsApi, getPlayListDetailApi, updatePlayListApi } from \"@/api/playList\";\nimport { useRoute, useRouter } from \"vue-router\";\nimport { AxiosResponseProps } from \"@/utils/request\";\nimport { useStore } from \"vuex\";\ninterface stateProps {\n    navs: NavsProps[];\n    tags: {}[];\n    name: string;\n    desc: string;\n    imgFile: string;\n    formData: FormData;\n    tagList: any[];\n    modalVisible: boolean;\n    tagLabelNames: string[];\n    commonToast: Ref;\n    mergedTagList: ComputedRef;\n    playListDetail: object;\n    descRef: Ref;\n}\nexport default defineComponent({\n    components: { HorizontalNav },\n    setup() {\n        const route = useRoute();\n        const router = useRouter();\n        const store = useStore();\n        const state = reactive<stateProps>({\n            navs: [\n                {\n                    title: \"编辑歌单信息\",\n                    active: true,\n                },\n            ],\n            tags: [],\n            tagList: [],\n            mergedTagList: computed(() => state.tagList.reduce((pre, item) => [...pre, ...item], [])),\n            tagLabelNames: [\"语种\", \"风格\", \"场景\", \"情感\", \"主题\"],\n            name: \"\",\n            desc: \"\",\n            imgFile: \"https://p1.music.126.net/jWE3OEZUlwdz0ARvyQ9wWw==/109951165474121408.jpg\",\n            formData: null,\n            modalVisible: false,\n            commonToast: ref(null),\n            playListDetail: {},\n            descRef: ref(null),\n        });\n        const getPlayListDetail = () => {\n            getPlayListDetailApi({ id: route.query.id }).then((res: any) => {\n                if (res.code === 200) {\n                    state.playListDetail = res.playlist;\n                    state.imgFile = state.playListDetail.coverImgUrl;\n                    state.name = state.playListDetail.name || \"\";\n                    state.desc = state.playListDetail.description || \"\";\n                    state.tags = state.playListDetail.tags || [];\n                }\n            });\n        };\n        let handleEditCover;\n        const init = () => {\n            getPlayListDetail();\n            let fileUploader = new FileSelector();\n            handleEditCover = () => {\n                fileUploader.select();\n            };\n            fileUploader.handleCallback((files: FileList) => {\n                // if (files[0].size / 1000 / 1024 > 1) return state.commonToast.warn(\"上传文件不得大于1mb\");\n                state.formData = new FormData();\n                state.formData.append(\"id\", route.query.id as string);\n                state.formData.append(\"imgFile\", files[0]);\n                const reader = new FileReader();\n                reader.readAsDataURL(files[0]);\n                reader.onload = (event: Event) => {\n                    state.imgFile = (event.target as FileReader).result as string;\n                    let img = new Image();\n                    img.src = state.imgFile;\n                    img.onload = () => {\n                        state.formData.append(\"imgSize\", img.width || img.naturalWidth || 300);\n                    };\n                };\n            });\n        };\n        watch(\n            () => route.query,\n            newV => {\n                init();\n                if (newV.desc == \"true\") {\n                    nextTick(() => {\n                        state.descRef.focus();\n                    });\n                }\n            },\n            {\n                immediate: true,\n            }\n        );\n        const handleSave = () => {\n            //更新歌单\n            const { name, tags, desc } = state;\n            if (!name) return state.commonToast.warn(\"歌单名不能为空\");\n            updatePlayListApi({ name, tags: tags.map(item => item.name).join(\";\"), desc, id: route.query.id as string }).then(\n                (res: AxiosResponseProps) => {\n                    if (res.code === 200) {\n                        state.commonToast.success(\"歌单信息更新成功\");\n                        //   //上传封面\n                        if (!state.formData || !state.formData.get(\"imgFile\")) {\n                            init();\n                            return store.dispatch(\"getCreatedMusicList\");\n                        }\n                        updatePlayListCoverApi(state.formData)\n                            .then((res: AxiosResponseProps) => {\n                                if (res.code === 200) {\n                                    init();\n                                    store.dispatch(\"getCreatedMusicList\");\n                                    state.commonToast.success(\"歌单封面更新成功\");\n                                } else {\n                                    state.commonToast.success(res.msg || \"歌单封面更新失败,可能原因为图片过大\");\n                                }\n                            })\n                            .catch(err => {\n                                state.commonToast.success(err.msg || \"歌单封面更新失败,可能原因为图片过大\");\n                            });\n                    }\n                }\n            );\n        };\n        const getHighqualityTags = () => {\n            getHighqualityTagsApi().then((res: any) => {\n                if (res.code === 200) {\n                    state.tagList = res.tags\n                        //确认category的个数\n                        .reduce((pre2, item2) => (pre2.map(item3 => item3.category).includes(item2.category) ? pre2 : [...pre2, item2]), [])\n                        //把category相同的tag放入当前项\n                        .map(item4 => res.tags.filter(item5 => item5.category == item4.category));\n                }\n            });\n        };\n        getHighqualityTags();\n        const modalConfirm = () => {\n            state.tags = [...state.mergedTagList.filter(item => item.active)];\n            state.modalVisible = false;\n        };\n        const clickTagItem = tag => {\n            if (tag.active) {\n                tag.active = false;\n            } else {\n                if (state.mergedTagList.filter(item => item.active).length < 3) {\n                    tag.active = true;\n                } else {\n                    state.commonToast.warn(\"最多可选三个标签\");\n                }\n            }\n        };\n        return {\n            ...toRefs(state),\n            handleEditCover,\n            handleSave,\n            modalConfirm,\n            clickTagItem,\n        };\n    },\n});\n","import { render } from \"./updateMusicList.vue?vue&type=template&id=66693a88&scoped=true&ts=true\"\nimport script from \"./updateMusicList.vue?vue&type=script&lang=ts\"\nexport * from \"./updateMusicList.vue?vue&type=script&lang=ts\"\n\nimport \"./updateMusicList.vue?vue&type=style&index=0&id=66693a88&scoped=true&lang=scss\"\n\nimport exportComponent from \"/Users/bytedance/Documents/projects/followNeteaseDesktop/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-66693a88\"]])\n\nexport default __exports__","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./updateMusicList.vue?vue&type=style&index=0&id=66693a88&scoped=true&lang=scss\""],"sourceRoot":""}