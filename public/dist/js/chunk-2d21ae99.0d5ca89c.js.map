{"version":3,"sources":["webpack:///./src/views/searchResultDetail.vue?b8f9","webpack:///./src/views/searchResultDetail.vue?9864","webpack:///./src/views/searchResultDetail.vue"],"names":["_hoisted_1","class","_hoisted_2","_hoisted_3","_ctx","_cache","$props","$setup","$data","$options","_component_HorizontalNav","_component_LikedIcon","_component_HaveLikedIcon","_component_DownloadMusicIcon","_component_musicList","_component_CommonToast","navs","columns","dataSource","map","item","index","emptyText","toolBar","musicId","id","name","String","padStart","likedMusicList","includes","key","onClick","$event","collectMusic","width","height","handleDownloadMusic","_","ref","components","MusicList","setup","route","store","state","title","active","keywords","query","keyword","songs","span","dataIndex","slots","customRender","render","text","join","toastRef","newV","type","then","res","code","result","dispatch","immediate","like","success","error","catch","err","urls","data","length","url","warn","__exports__"],"mappings":"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","file":"js/chunk-2d21ae99.0d5ca89c.js","sourcesContent":["import { resolveComponent as _resolveComponent, createVNode as _createVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, withCtx as _withCtx, Fragment as _Fragment } from \"vue\"\n\nconst _hoisted_1 = { class: \"px-5 py-4\" }\nconst _hoisted_2 = { class: \"text-muted me-3\" }\nconst _hoisted_3 = { class: \"me-3\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_HorizontalNav = _resolveComponent(\"HorizontalNav\")\n  const _component_LikedIcon = _resolveComponent(\"LikedIcon\")\n  const _component_HaveLikedIcon = _resolveComponent(\"HaveLikedIcon\")\n  const _component_DownloadMusicIcon = _resolveComponent(\"DownloadMusicIcon\")\n  const _component_musicList = _resolveComponent(\"musicList\")\n  const _component_CommonToast = _resolveComponent(\"CommonToast\")\n\n  return (_openBlock(), _createBlock(_Fragment, null, [\n    _createVNode(\"div\", _hoisted_1, [\n      _createVNode(_component_HorizontalNav, { navs: _ctx.navs }, null, 8, [\"navs\"]),\n      _createVNode(_component_musicList, {\n        columns: _ctx.columns,\n        dataSource: _ctx.dataSource?.map((item, index) => ({ ...item, index: index })),\n        emptyText: \"暂无搜索结果，搜搜其他关键词吧~\"\n      }, {\n        toolBar: _withCtx(({ id: musicId, index, name }) => [\n          _createVNode(\"span\", _hoisted_2, _toDisplayString(String(index + 1).padStart(2, \"0\")), 1),\n          _createVNode(\"span\", _hoisted_3, [\n            (!_ctx.likedMusicList.includes(musicId))\n              ? (_openBlock(), _createBlock(_component_LikedIcon, {\n                  key: 0,\n                  class: \"cursor-pointer\",\n                  onClick: ($event: any) => (_ctx.collectMusic(true, musicId)),\n                  width: \"15\",\n                  height: \"15\"\n                }, null, 8, [\"onClick\"]))\n              : (_openBlock(), _createBlock(_component_HaveLikedIcon, {\n                  key: 1,\n                  class: \"cursor-pointer\",\n                  onClick: ($event: any) => (_ctx.collectMusic(false, musicId)),\n                  width: \"15\",\n                  height: \"15\"\n                }, null, 8, [\"onClick\"]))\n          ]),\n          _createVNode(_component_DownloadMusicIcon, {\n            onClick: ($event: any) => (_ctx.handleDownloadMusic({ id: musicId, name })),\n            class: \"cursor-pointer\",\n            width: \"15\",\n            height: \"15\"\n          }, null, 8, [\"onClick\"])\n        ]),\n        _: 1\n      }, 8, [\"columns\", \"dataSource\"])\n    ]),\n    _createVNode(_component_CommonToast, { ref: \"toastRef\" }, null, 512)\n  ], 64))\n}","\r\nimport { computed, ComputedRef, defineComponent, reactive, ref, Ref, toRefs, watch } from \"vue\";\r\nimport { NavsProps } from \"@/components/viewParts/HorizontalNav.vue\";\r\nimport { searchApi, cloudsearchApi } from \"@/api/search\";\r\nimport { useRoute } from \"vue-router\";\r\nimport { useStore } from \"vuex\";\r\nimport MusicList, { ColumnProps } from \"@/components/utilityParts/MusicList.vue\";\r\nimport { playTime, YYYYMMDD, addHaveUrl } from \"@/utils/filters\";\r\nimport { likeMusic } from \"@/api/discover\";\r\nimport { downloadMusic } from \"@/utils/file\";\r\nimport { AxiosResponseProps } from \"@/utils/request\";\r\nimport { getSongUrlApi } from \"@/api/song\";\r\nexport default defineComponent({\r\n\tcomponents: { MusicList },\r\n\tsetup() {\r\n\t\tconst route = useRoute();\r\n\t\tconst store = useStore();\r\n\t\tconst state = reactive<{\r\n\t\t\tnavs: NavsProps[];\r\n\t\t\tkeywords: ComputedRef<string>;\r\n\t\t\tsongs: any[];\r\n\t\t\tcolumns: ColumnProps[];\r\n\t\t\tdataSource: any[];\r\n\t\t\tlikedMusicList: ComputedRef<unknown[]>;\r\n\t\t\ttoastRef: Ref;\r\n\t\t}>({\r\n\t\t\tnavs: [{ title: \"单曲\", active: true }],\r\n\t\t\tkeywords: computed(() => route.query.keyword as string),\r\n\t\t\tsongs: [],\r\n\t\t\tcolumns: [\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: \"\",\r\n\t\t\t\t\tspan: 1,\r\n\t\t\t\t\tdataIndex: \"toolBar\",\r\n\t\t\t\t\tslots: { customRender: \"toolBar\" },\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: \"音乐标题\",\r\n\t\t\t\t\tdataIndex: \"name\",\r\n\t\t\t\t\tspan: 3,\r\n\t\t\t\t\tslots: { customRender: \"name\" },\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: \"歌手\",\r\n\t\t\t\t\tdataIndex: \"ar\",\r\n\t\t\t\t\tspan: 3,\r\n\t\t\t\t\trender: (text) => {\r\n\t\t\t\t\t\treturn text.map((item) => item.name).join(\"、\");\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: \"专辑\",\r\n\t\t\t\t\tdataIndex: \"al\",\r\n\t\t\t\t\tspan: 2,\r\n\t\t\t\t\trender: (text) => {\r\n\t\t\t\t\t\treturn text.name;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: \"时长\",\r\n\t\t\t\t\tdataIndex: \"dt\",\r\n\t\t\t\t\tspan: 1,\r\n\t\t\t\t\trender: (text) => {\r\n\t\t\t\t\t\treturn playTime(text);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t\tdataSource: [],\r\n\t\t\tlikedMusicList: computed(() => store.state.likedMusicList),\r\n\t\t\ttoastRef: ref(null),\r\n\t\t});\r\n\t\twatch(\r\n\t\t\t() => state.keywords,\r\n\t\t\tasync (newV) => {\r\n\t\t\t\tif (newV) {\r\n\t\t\t\t\tcloudsearchApi({ keywords: newV, type: 1 }).then(async (res: any) => {\r\n\t\t\t\t\t\tif (res.code === 200) {\r\n\t\t\t\t\t\t\tstate.dataSource = await addHaveUrl(res.result.songs || []);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tawait store.dispatch(\"getLikedMusicList\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\timmediate: true,\r\n\t\t\t}\r\n\t\t);\r\n\t\tconst collectMusic = (like, id) => {\r\n\t\t\tlikeMusic({ id, like })\r\n\t\t\t\t.then(async (res: any) => {\r\n\t\t\t\t\tif (res.code === 200) {\r\n\t\t\t\t\t\tawait store.dispatch(\"getLikedMusicList\");\r\n\t\t\t\t\t\tstate.toastRef.success(like ? \"已添加到我喜欢的音乐\" : \"取消喜欢成功\");\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tstate.toastRef.error(like ? \"添加失败\" : \"取消喜欢失败\");\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch((err) => {\r\n\t\t\t\t\tstate.toastRef.error(\"请求失败\");\r\n\t\t\t\t});\r\n\t\t};\r\n\t\tconst handleDownloadMusic = ({ id, name }) => {\r\n\t\t\tgetSongUrlApi({ id }).then((res: AxiosResponseProps) => {\r\n\t\t\t\tif (res.code === 200) {\r\n\t\t\t\t\tlet urls = res.data;\r\n\t\t\t\t\tif (urls && urls.length) {\r\n\t\t\t\t\t\tdownloadMusic(urls[0].url, name)\r\n\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\tstate.toastRef.success(\"已添加至下载\");\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.catch(() => {\r\n\t\t\t\t\t\t\t\tstate.toastRef.warn(\"下载失败\");\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tstate.toastRef.warn(\"获取音乐链接失败\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t};\r\n\t\treturn {\r\n\t\t\t...toRefs(state),\r\n\t\t\tcollectMusic,\r\n\t\t\thandleDownloadMusic,\r\n\t\t};\r\n\t},\r\n});\r\n","import { render } from \"./searchResultDetail.vue?vue&type=template&id=04859650&ts=true\"\nimport script from \"./searchResultDetail.vue?vue&type=script&lang=ts\"\nexport * from \"./searchResultDetail.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"D:\\\\Desktop\\\\projects\\\\followNeteaseDesktop\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}